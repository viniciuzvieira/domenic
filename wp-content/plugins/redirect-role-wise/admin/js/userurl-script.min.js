jQuery(document).ready(function(e){var r=[];jQuery("body").append('<div id="overlay_dialog" style="display:none;"></div>'),jQuery(document).on("click",".delete_current_url",function(){jQuery(this).parent().remove()}),jQuery(".add_entry").click(function(){var e=Object.keys(pages_array).map(function(e){return e}),r=Object.keys(pages_array).map(function(e){return pages_array[e]}),t=Object.keys(wp_role_names).map(function(e){return e}),a=Object.keys(wp_role_names).map(function(e){return wp_role_names[e]}),o="<div class='url_block block_urls'><span class='dashicons dashicons-minus delete_current_url' ></span><div class='urlrrw_div'>  ";for(o+="<div class='pages_urls'><table><tr><td><span>Select Source Page/Pages</span></td>",o+="<td><select name='source_page'  class='source_page'  required>",i=0;i<r.length;i+=1)o+="<option value='"+e[i]+"'>"+r[i]+"</option>";for(o+="</select></td></tr><tr><td>",o+="<span>Select Role/Roles</span></td>",o+="<td><select name='rrw_role' class='rrw_role' multiple required>",i=0;i<a.length;i+=1)o+="<option value='"+t[i]+"'>"+a[i]+"</option>";for(o+="<option value='login'>All Roles</option><option value='logout'>Logout User</option>",o+="</select></td></tr><tr><td>",o+="<span>Select Destination Page</span></td>",o+="<td><select name='destination_page' class='destination_page' required>",i=0;i<r.length;i+=1)o+="<option value='"+e[i]+"'>"+r[i]+"</option>";o+="</select></td></tr></table></div>",o+="</div></div>",jQuery(".rrw_template_block").append(o)}),jQuery(".save_redirecturl").click(function(){if(fail=!1,jQuery("div.urlrrw_div .rrw_role").each(function(){if(jQuery(this).prop("required"))if(jQuery(this).val()){for(var e=jQuery(this).val(),r=0,t=0,a=e.length,o=0;a>o;o++)"login"==e[o]&&(r=1),"logout"==e[o]&&1==r&&(fail=!0,alert("Error : Login Logout can not be used together. Data not saved"),t=1);jQuery(this).removeClass("error"),jQuery(this).next("span").hasClass("error-msg")&&jQuery(this).next("span").remove()}else fail=!0,jQuery(this).hasClass("error")||(jQuery(this).after('<span class="error-msg" style="display: block;">* Required field.</span>'),jQuery(this).addClass("error"))}),!fail){var e=[],t=[],a=[],o=[];jQuery(".post_id").each(function(){e.push(jQuery(this).val())}),jQuery(".source_page").each(function(){t.push(jQuery(this).val())}),jQuery(".rrw_role").each(function(){a.push(jQuery(this).val())}),jQuery(".destination_page").each(function(){o.push(jQuery(this).val())}),jQuery.ajax({url:ajaxurl,data:{action:"rrw_save_urls",post_id:e,sources:t,redirectrole:a,destination:o,url_delete:r,security:gyrixredirectnonce.ajaxSaveGyrix},type:"POST",success:function(e){e=e.replace(/^\s+|\s+$/g,""),"error"==e?(alert("Source and role combination should be unique"),location.reload()):e?(alert("Updated Successfully"),location.reload()):console.log("Not updated")}})}}),jQuery(".save_redirectoptions").click(function(){if(jQuery(".rrw_multirole").is(":checked"))var e="multi";else var e="primary";jQuery.ajax({url:ajaxurl,data:{action:"rrw_save_options",rrw_multirole:e,security:gyrixredirectnonce.ajaxSaveOptionGyrix},type:"POST",success:function(e){e=e.replace(/^\s+|\s+$/g,""),"error"==e?(alert("Source and role combination should be unique"),location.reload()):e?(alert("Updated Successfully"),location.reload()):console.log("Not updated")}})}),jQuery(".delete_current_url").on("click",function(){r.push(parseInt(jQuery(this).parent().find(".post_id").val()))})});